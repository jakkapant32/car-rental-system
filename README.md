# üöó ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πà‡∏≤‡∏£‡∏ñ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏û‡∏£‡πâ‡∏≠‡∏° QR Code

‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πà‡∏≤‡∏£‡∏ñ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô/‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå

## ‚ú® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

- **‡πÄ‡∏ß‡πá‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤**: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏à‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå
- **Admin Dashboard**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏ñ ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- **Staff PWA**: ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô/‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå
- **QR Code System**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ QR Code ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **Payment Integration**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏° webhook
- **Real-time Status**: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ñ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå

## üèóÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå

```
car-rental-project/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ web-customer/     # SPA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (React + TypeScript)
‚îÇ   ‚îú‚îÄ‚îÄ web-admin/        # SPA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ staff-app/        # PWA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡πÅ‡∏Å‡∏ô QR
‚îú‚îÄ‚îÄ backend/              # API Server (Express + TypeScript)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/       # API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # Business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/ # Auth, rate limiting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/  # Database migrations
‚îú‚îÄ‚îÄ scripts/              # Utility scripts
‚îî‚îÄ‚îÄ docker-compose.yml    # Docker setup
```

## üöÄ Quick Start

### Prerequisites

- Node.js 18+
- PostgreSQL (‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Docker)
- npm ‡∏´‡∏£‡∏∑‡∏≠ yarn

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
# Root
npm install

# Backend
cd backend
npm install

# Frontend Customer
cd ../frontend/web-customer
npm install

# Frontend Admin
cd ../web-admin
npm install

# Frontend Staff
cd ../staff-app
npm install
```

### 2. Setup Database

#### ‡πÉ‡∏ä‡πâ Render.com PostgreSQL:

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á PostgreSQL database ‡∏ö‡∏ô Render.com
2. Copy connection string
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `backend/.env`:

```env
DB_HOST=your-db-host.onrender.com
DB_PORT=5432
DB_NAME=car_rental
DB_USER=your_db_user
DB_PASSWORD=your_db_password
JWT_SECRET=your-super-secret-jwt-key
JWT_REFRESH_SECRET=your-refresh-secret
PORT=3001
NODE_ENV=production
FRONTEND_URL=http://localhost:3000
```

#### ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Docker (Local Development):

```bash
docker-compose up -d postgres
```

### 3. Run Migrations

```bash
cd backend
npm run migrate:dev
```

### 4. Start Backend

```bash
cd backend
npm run dev
```

Backend ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:3001`

### 5. Start Frontend

‡πÄ‡∏õ‡∏¥‡∏î terminal ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ frontend:

```bash
# Customer site (port 3000)
cd frontend/web-customer
npm run dev

# Admin panel (port 3002)
cd frontend/web-admin
npm run dev

# Staff app (port 3003)
cd frontend/staff-app
npm run dev
```

## üê≥ Docker Deployment

```bash
# Build ‡πÅ‡∏•‡∏∞ start ‡∏ó‡∏∏‡∏Å services
docker-compose up -d

# ‡∏î‡∏π logs
docker-compose logs -f

# Stop
docker-compose down
```

## üìö API Endpoints

### Auth
- `POST /api/auth/register` - ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- `POST /api/auth/login` - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- `GET /api/auth/me` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### Vehicles
- `GET /api/vehicles` - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ (‡∏û‡∏£‡πâ‡∏≠‡∏° filters)
- `GET /api/vehicles/:id` - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏ñ
- `POST /api/vehicles` - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏ñ (admin only)
- `PUT /api/vehicles/:id` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏ñ (admin only)
- `DELETE /api/vehicles/:id` - ‡∏•‡∏ö‡∏£‡∏ñ (admin only)

### Bookings
- `POST /api/bookings` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `GET /api/bookings/my-bookings` - ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
- `GET /api/bookings/:id` - ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `PUT /api/bookings/:id/confirm` - ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á (admin)
- `PUT /api/bookings/:id/cancel` - ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á

### QR Code
- `GET /api/qr/:qrValue` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡∏à‡∏≤‡∏Å QR (public, rate-limited)
- `POST /api/qr/:qrValue/scan` - ‡∏™‡πÅ‡∏Å‡∏ô QR (staff/admin)

### Admin
- `POST /api/admin/vehicles/:id/generate-qr` - ‡∏™‡∏£‡πâ‡∏≤‡∏á QR ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ
- `GET /api/admin/reports/occupancy` - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- `GET /api/admin/reports/revenue` - ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
- `GET /api/admin/qr-logs` - QR scan logs

## üîê Authentication

‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ JWT tokens:
- Access token: ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API calls
- Refresh token: ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ token

Headers:
```
Authorization: Bearer <token>
```

## üóÑÔ∏è Database Schema

### ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å:
- `users` - ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (customer/admin/staff)
- `vehicles` - ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå
- `qr_tags` - QR codes
- `bookings` - ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- `payments` - ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- `qr_logs` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô QR
- `notifications` - ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- `audit_logs` - Audit trail

‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô `backend/src/migrations/001_create_tables.sql`

## üîí Security Features

- ‚úÖ Password hashing (bcrypt)
- ‚úÖ JWT authentication
- ‚úÖ Role-based access control (RBAC)
- ‚úÖ Rate limiting (QR endpoints)
- ‚úÖ Input validation (Zod)
- ‚úÖ SQL injection protection (parameterized queries)

## üì± Staff PWA

Staff app ‡πÄ‡∏õ‡πá‡∏ô Progressive Web App ‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:
- ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô/‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡∏£‡∏ñ
- ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ (sync ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå)

## üß™ Testing

```bash
# Backend tests (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ)
cd backend
npm test

# Frontend tests (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ)
cd frontend/web-customer
npm test
```

## üìù Environment Variables

### Backend (.env)
```env
DB_HOST=
DB_PORT=5432
DB_NAME=car_rental
DB_USER=
DB_PASSWORD=
JWT_SECRET=
JWT_REFRESH_SECRET=
JWT_EXPIRES_IN=24h
PORT=3001
NODE_ENV=development
FRONTEND_URL=http://localhost:3000
```

## üö¢ Deployment

### Render.com

1. **Backend**: 
   - Connect GitHub repo
   - Build command: `cd backend && npm install && npm run build`
   - Start command: `cd backend && npm start`
   - Environment variables: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DB ‡πÅ‡∏•‡∏∞ JWT secrets

2. **Frontend**: 
   - Deploy ‡πÅ‡∏ï‡πà‡∏•‡∏∞ frontend ‡πÄ‡∏õ‡πá‡∏ô static site
   - ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Vercel/Netlify

3. **Database**: 
   - ‡πÉ‡∏ä‡πâ Render PostgreSQL (‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß)

### Production Checklist

- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables (‡∏°‡∏µ validation ‡πÅ‡∏•‡πâ‡∏ß)
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô JWT secrets (‡πÉ‡∏ä‡πâ secrets ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
- [x] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production domains (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢ domains)
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô HTTPS
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ backup database
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ monitoring (Sentry, etc.)
- [x] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö payment gateway integration (Stripe integrated)
- [x] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö QR scanning flow
- [x] Image upload system
- [x] Email notifications

### New Features (Latest Update)

- ‚úÖ **Stripe Payment Integration**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ú‡πà‡∏≤‡∏ô Stripe
- ‚úÖ **Email Notifications**: ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
- ‚úÖ **Image Upload**: ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå (admin only)
- ‚úÖ **Environment Validation**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö environment variables ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ **Production CORS**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production

## üìÑ License

MIT

## üë• Contributors

Created for Car Rental System Project

## üìû Support

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î issue ‡πÉ‡∏ô repository

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Production-ready ‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥ security audit ‡πÅ‡∏•‡∏∞ penetration testing ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

